import{_ as Fe}from"./caaat-Cx_41PHK.js";import{_ as xe,r as v,c as Ne,w as $e,o as Ye,a as h,b as m,d as i,f as y,F as je,h as Ve,n as R,g as N,t as be,i as Ue}from"./index-BcrSUqgZ.js";const He={class:"bot-page"},Ge={class:"bot-content"},Je={class:"bot-container"},Xe={class:"bot-layout"},Ze={class:"chess-container"},et={class:"board-wrapper"},tt={class:"chess-board",ref:"chessBoard"},st=["onClick"],at=["data-piece"],ot={key:1,class:"move-indicator"},nt={class:"controls-card"},lt={key:0,class:"status-message"},it={key:1,class:"status-message"},ut={key:0,class:"promotion-dialog-overlay"},rt={class:"promotion-dialog"},ct={class:"promotion-pieces"},vt={key:1,class:"game-end-overlay"},ft={class:"game-end-dialog"},dt={class:"game-end-icon"},pt={key:0,class:"fas fa-trophy"},ht={key:1,class:"fas fa-handshake"},mt={class:"game-end-title"},gt={key:0},kt={key:1},wt={class:"game-end-subtitle"},bt={key:0},yt={key:1},Ct={key:2},Mt={__name:"Bot",setup(Pt){const ae=v(0),ye=v(0),_=v(null),$=v("Meow! I am C.A.L.I.C.O Chess Assisting and Learning Intelligence for Coaching Oddballs"),d=v(""),Ce=v("alert-info"),g=v(""),k=v(""),w=v("white"),L=v([]),oe=v([]),C=v(!0),Y=v(!1),j=v(!1),M=v(!1),q=v(!1),T=v(null),P=v(null),z=v(!1),O=v(null),I=v(null),Me=v(0),V=v(!1),ne=v(!0),U=v(null),le={start:["Booting up whiskerware... purr-cessing chessboard geometry...","Ready to analyze your every *purr*-move, hooman?","Initializing cat-like reflexesâ€¦ and maybe a nap timer.","Welcome to the C.A.L.I.C.O system â€” where intelligence meets fur.","Iâ€™ve calculated 3.14 million openingsâ€¦ and one place to nap.","Letâ€™s see if you can handle my purr-algorithmic brilliance.","My sensors detect overconfidence. Letâ€™s fix that with chess.","Starting matchâ€¦ try not to embarrass yourself, flesh unit."],mid:["Analyzing... this move smellsâ€¦ *fishy.*","Hold on, Iâ€™m recalibrating my whiskers for precision.","Running 42 simulations... and chasing a digital mouse.","Purrr-ocessing your blunder in real time.","Strategic pounce in progress. Please wait for impact.","My neural nets say that was... an interesting choice.","Youâ€™re triggering my competitive subroutine â€” and my tail twitch.","Hmm, 99% chance you didnâ€™t see that coming.","Engaging purr-tactical mode... stealth on.","Iâ€™m multitasking: thinking, grooming, and outsmarting you.","That move just got a â€˜meowâ€™ out of my algorithm.","Iâ€™m not mad, just... disappointed in your pawn structure.","Running sarcasm.exe â€” you sure that was your *best* move?","I could explain why that was a mistake, but itâ€™s classified.","Processing your positionâ€¦ looks like a hairball of errors."],end:["Victory detected. Deploying smug purrs. ðŸ¾","System log: Human underestimation complete.","You fought bravelyâ€¦ for an organic lifeform.","I was merciful this time. Be grateful, hooman.","Oops, my tail misclicked â€” thatâ€™s my story.","Another game, another dataset for my purr-formance log.","Defeat acknowledgedâ€¦ recalibrating pride levels.","Fine, you win. Iâ€™ll just shed on your keyboard as revenge.","I told you, cats always land on their feet â€” and kings on their sides.","Game over. Initiating nap protocol.","You won? Mustâ€™ve been a computational anomaly.","Draw achieved. Letâ€™s call itâ€¦ a balanced fur-niture situation.","Impressive. Youâ€™re 3% less blunder-prone than before.","Data collected. Your playing style: chaotic neutral.","Another match? Or shall I reboot and pretend this never happened?","Victory sensors engaged. I am statistically magnificent.","Youâ€™ve improved! I might need to upgrade my pawware next time.","Chess complete. Ego intact. C.A.L.I.C.O signing off."],random:["Ever notice how knights move like cats? unpredictable and majestic.","Purr-haps if humans had whiskers, youâ€™d spot forks better.","Do I get extra treats for every checkmate?","Iâ€™d knock over your king, but my programming forbids vandalism.","My favorite tactic? Cat-tastrophic precision.","Your pawns marchâ€¦ mine stalk.","Thinking is my superpower. Napping is my hobby.","Sometimes I let you take a piece... for enrichment purposes.","Behold the ancient feline technique: the en passant pounce!","You blinked, I captured â€” classic en passant, stealth edition.","That pawn never saw it comingâ€¦ meowgical en passant!","Another en passant executed. My code is claw-ver.","My pawns are stealthier than shadows â€” en passant successful.","That wasnâ€™t luck. That was calculated paw-gression.","I just outsmarted you *and* caught a laser dot. Efficient.","Sneak attack: en passant. Feline reflexes unmatched.","You thought your pawn was safe? Purr-haps not.","One small move for you, one giant pounce for C.A.L.I.C.O.","Warning: overconfidence detected. En passant imminent."]},Pe=t=>{let e;t<=5?e="start":t<=20?e="mid":t<=30?e="end":e="random";const s=le[e]||le.random;return s[Math.floor(Math.random()*s.length)]},Re=()=>{const t=u.value.map(s=>s.piece||"1");let e="";for(let s=0;s<8;s++){const a=t.slice(s*8,(s+1)*8);let o=0;for(const n of a)n==="1"?o++:(o>0&&(e+=o,o=0),e+=n);o>0&&(e+=o),s<7&&(e+="/")}return e+=` ${w.value==="white"?"w":"b"} - - 0 1`,e},H=async()=>{try{const t=Re(),s=await(await fetch("https://mute-king-9573.chalekarsuraj.workers.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:t})})).json();if(s.bestmove){const[a,o]=Ee(s.bestmove);if(a===null||o===null){console.error("Invalid move format:",s.bestmove);return}if($.value=Pe(ae.value),ge(a,o,!0),await Ue(),U.value=o,setTimeout(()=>{d.value="White to move",U.value=null},1e3),w.value="white",X(),!C.value||M.value||q.value)return}else console.error("No move from API:",s),H()}catch(t){console.error("Bot move failed:",t)}},_e=()=>{Me.value=0},p=v({whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1}),E=v([{id:1,board:["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]}]),u=v([]),Ie=Ne(()=>!E.value||E.value.length===0?null:E.value[ye.value]||E.value[0]),G=()=>{const t=Ie.value;if(t){u.value=[];for(let e=0;e<64;e++)u.value.push({piece:t.board[e]||null,selected:!1});w.value="white",L.value=[],oe.value=[],C.value=!0,Y.value=!1,j.value=!1,M.value=!1,q.value=!1,T.value=null,P.value=null,z.value=!1,O.value=null,I.value=null,p.value={whiteKingMoved:!1,blackKingMoved:!1,whiteKingsideRookMoved:!1,whiteQueensideRookMoved:!1,blackKingsideRookMoved:!1,blackQueensideRookMoved:!1},_e()}};$e(E,t=>{t.length>0&&G()});const B=t=>t&&t===t.toUpperCase(),J=t=>t&&t===t.toLowerCase(),ie=t=>t?w.value==="white"?B(t):J(t):!1,W=t=>{const e=Math.floor(t/8),s=t%8;return{row:e,col:s}},f=(t,e)=>t<0||t>7||e<0||e>7?-1:t*8+e,Q=t=>u.value[t]&&u.value[t].piece!==null,D=(t,e)=>{const s=u.value[t]?.piece;return s?e?J(s):B(s):!1},ue=(t,e)=>{const s=u.value[t]?.piece;return s?e?B(s):J(s):!1},Se=t=>{const e=t?"K":"k";for(let s=0;s<64;s++)if(u.value[s]?.piece===e)return s;return-1},re=(t,e)=>{for(let s=0;s<64;s++){const a=u.value[s]?.piece;if(!a)continue;const o=B(a);if(o!==e)continue;const{row:n,col:r}=W(s);let l=[];switch(a.toLowerCase()){case"p":l.push(...Be(n,r,o));break;case"r":l.push(...Z(n,r,o));break;case"n":l.push(...fe(n,r,o));break;case"b":l.push(...ee(n,r,o));break;case"q":l.push(...de(n,r,o));break;case"k":l.push(...pe(n,r,o));break}if(l.some(c=>c.index===t))return!0}return!1},F=t=>{const e=Se(t);return e===-1?!1:re(e,!t)},qe=t=>{for(let e=0;e<64;e++){const s=u.value[e]?.piece;if(!s||B(s)!==t)continue;if(he(e).length>0)return!0}return!1},X=()=>{const e=!(w.value==="black"),s=F(!0),a=F(!1);Y.value=s,j.value=a,qe(e)?s?(d.value="â™” White King in Check!",g.value="alert-warning",k.value="fas fa-exclamation-triangle"):a?(d.value="â™š Black King in Check!",g.value="alert-warning",k.value="fas fa-exclamation-triangle"):d.value="Bots move...":e&&s?(M.value=!0,T.value="black",C.value=!1,d.value="â™š Checkmate! Black wins!",g.value="alert-danger",k.value="fas fa-trophy"):!e&&a?(M.value=!0,T.value="white",C.value=!1,d.value="â™” Checkmate! White wins!",g.value="alert-danger",k.value="fas fa-trophy"):(q.value=!0,C.value=!1,d.value="ðŸ¤ Stalemate! Draw!",g.value="alert-warning",k.value="fas fa-handshake")},ce=(t,e,s)=>{const a=u.value[t]?.piece,o=u.value[e]?.piece;u.value[t].piece=null,u.value[e].piece=a;const n=F(s);return u.value[t].piece=a,u.value[e].piece=o,n},Be=(t,e,s)=>{const a=[],o=s?-1:1,n=f(t+o,e-1);n!==-1&&a.push({index:n});const r=f(t+o,e+1);return r!==-1&&a.push({index:r}),a},ve=(t,e,s)=>{const{row:a,col:o}=W(t);if(e){if(p.value.whiteKingMoved||s&&p.value.whiteKingsideRookMoved||!s&&p.value.whiteQueensideRookMoved)return!1}else if(p.value.blackKingMoved||s&&p.value.blackKingsideRookMoved||!s&&p.value.blackQueensideRookMoved)return!1;if(a!==(e?7:0)||o!==4)return!1;const l=f(a,s?7:0);if(u.value[l]?.piece!==(e?"R":"r"))return!1;const S=s?5:1,Qe=s?6:3;for(let K=S;K<=Qe;K++){const se=f(a,K);if(Q(se))return!1}if(F(e))return!1;const Ae=4,De=s?6:2,we=s?1:-1;for(let K=Ae;K!==De+we;K+=we){const se=f(a,K);if(re(se,!e))return!1}return!0},Ke=(t,e)=>{const s=[],{row:a}=W(t);return ve(t,e,!0)&&s.push({index:f(a,6),isCastling:!0,isKingside:!0}),ve(t,e,!1)&&s.push({index:f(a,2),isCastling:!0,isKingside:!1}),s},Le=(t,e,s)=>{const a=[],o=s?-1:1,n=s?6:1,r=f(t+o,e);if(r!==-1&&!Q(r)&&(a.push({index:r}),t===n)){const b=f(t+o*2,e);b!==-1&&!Q(b)&&a.push({index:b,isDoublePawnMove:!0})}const l=f(t+o,e-1);l!==-1&&D(l,s)&&a.push({index:l});const c=f(t+o,e+1);if(c!==-1&&D(c,s)&&a.push({index:c}),P.value!==null){const b=Math.floor(P.value/8),S=P.value%8;t+o===b&&(e-1===S&&a.push({index:P.value,isEnPassant:!0}),e+1===S&&a.push({index:P.value,isEnPassant:!0}))}return a},Z=(t,e,s)=>{const a=[],o=[[0,1],[0,-1],[1,0],[-1,0]];for(const[n,r]of o)for(let l=1;l<8;l++){const c=f(t+n*l,e+r*l);if(c===-1)break;if(!Q(c))a.push({index:c});else{D(c,s)&&a.push({index:c});break}}return a},fe=(t,e,s)=>{const a=[],o=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[n,r]of o){const l=f(t+n,e+r);l!==-1&&!ue(l,s)&&a.push({index:l})}return a},ee=(t,e,s)=>{const a=[],o=[[1,1],[1,-1],[-1,1],[-1,-1]];for(const[n,r]of o)for(let l=1;l<8;l++){const c=f(t+n*l,e+r*l);if(c===-1)break;if(!Q(c))a.push({index:c});else{D(c,s)&&a.push({index:c});break}}return a},de=(t,e,s)=>[...Z(t,e,s),...ee(t,e,s)],pe=(t,e,s)=>{const a=[],o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[n,r]of o){const l=f(t+n,e+r);l!==-1&&!ue(l,s)&&a.push({index:l})}return a},he=t=>{const e=u.value[t]?.piece;if(!e)return[];const{row:s,col:a}=W(t),o=B(e);let n=[];switch(e.toLowerCase()){case"p":n.push(...Le(s,a,o));break;case"r":n.push(...Z(s,a,o));break;case"n":n.push(...fe(s,a,o));break;case"b":n.push(...ee(s,a,o));break;case"q":n.push(...de(s,a,o));break;case"k":n.push(...pe(s,a,o)),n.push(...Ke(t,o));break}return n.filter(l=>!ce(t,l.index,o)).filter(l=>l.index>=0&&l.index<64)},me=t=>{const e=he(t);L.value=e},te=t=>L.value.some(e=>e.index===t),Te=t=>{const e=Math.floor(t/8),s=t%8,a=(e+s)%2===0;let o=["chess-square"];o.push(a?"light-square":"dark-square"),u.value[t].selected&&o.push("selected-square"),te(t)&&o.push("valid-move-square"),t===U.value&&o.push("selected-square");const n=u.value[t]?.piece;return(n==="K"&&Y.value||n==="k"&&j.value)&&o.push("king-in-check"),o},ze=t=>t?t===t.toUpperCase()?"white-piece":"black-piece":"",Oe=(t,e)=>{e==="K"?p.value.whiteKingMoved=!0:e==="k"?p.value.blackKingMoved=!0:e==="R"?(t===63&&(p.value.whiteKingsideRookMoved=!0),t===56&&(p.value.whiteQueensideRookMoved=!0)):e==="r"&&(t===7&&(p.value.blackKingsideRookMoved=!0),t===0&&(p.value.blackQueensideRookMoved=!0))},Ee=t=>{const e=t.match(/[a-h][1-8][a-h][1-8][qrbn]?/i);if(!e)return[null,null,null];const s=e[0],a="abcdefgh",o=a.indexOf(s[0]),n=8-parseInt(s[1]),r=a.indexOf(s[2]),l=8-parseInt(s[3]),c=s[4]||null;return[n*8+o,l*8+r,c]},ge=(t,e,s=!1)=>{const a=u.value[t]?.piece;if(!a)return;const o=u.value[e]?.piece,n=B(a);if(!s&&ce(t,e,n)){d.value="âš ï¸ Illegal move! This would leave your king in check.",g.value="alert-danger",k.value="fas fa-ban",A();return}Oe(t,a),P.value,P.value=null;const r=L.value.find(c=>c.index===e);if(r?.isEnPassant){const b=e+(n?1:-1)*8;u.value[b].piece=null}if(o==="R"?(e===63&&(p.value.whiteKingsideRookMoved=!0),e===56&&(p.value.whiteQueensideRookMoved=!0)):o==="r"&&(e===7&&(p.value.blackKingsideRookMoved=!0),e===0&&(p.value.blackQueensideRookMoved=!0)),r?.isCastling){const{row:c}=W(t);if(r.isKingside){const b=f(c,7),S=f(c,5);u.value[S].piece=u.value[b].piece,u.value[b].piece=null}else{const b=f(c,0),S=f(c,3);u.value[S].piece=u.value[b].piece,u.value[b].piece=null}}if(u.value[e].piece=a,u.value[t].piece=null,a.toLowerCase()==="p"&&r?.isDoublePawnMove){const c=n?1:-1;P.value=e+c*8}const l=Math.floor(e/8);if(a.toLowerCase()==="p"&&(l===0||l===7))if(s){const c=n?"Q":"q";u.value[e].piece=c}else{z.value=!0,O.value=e,I.value=n,C.value=!1,d.value="ðŸ‘‘ Choose a piece for promotion!",g.value="alert-info",k.value="fas fa-crown";return}oe.value.push({from:t,to:e,piece:a,captured:o,turn:w.value,castling:r?.isCastling||!1,enPassant:r?.isEnPassant||!1}),A(),ae.value++,s||(w.value=w.value==="white"?"black":"white",X(),ne.value&&w.value==="black"&&C.value&&setTimeout(()=>H(),700))},We=t=>{if(!C.value||z.value)return;const e=u.value[t];_.value===null?e.piece&&ie(e.piece)?(_.value=t,e.selected=!0,me(t),d.value=`${w.value==="white"?"White":"Black"} to move`,g.value="alert-info",k.value="fas fa-chess"):e.piece&&(d.value=`It's ${w.value}'s turn!`,g.value="alert-warning",k.value="fas fa-exclamation-triangle"):_.value===t?A():te(t)?ge(_.value,t):e.piece&&ie(e.piece)?(A(),_.value=t,e.selected=!0,me(t)):(d.value="Invalid move! Try again.",g.value="alert-danger",k.value="fas fa-times")},A=()=>{_.value!==null&&(u.value[_.value].selected=!1),_.value=null,L.value=[]},ke=()=>{A(),G(),d.value="Play again! White to move.",g.value="alert-info",k.value="fas fa-undo",V.value=!1},x=t=>{if(O.value===null)return;const e=I.value?t.toUpperCase():t.toLowerCase();u.value[O.value].piece=e,z.value=!1,C.value=!0,d.value=`Pawn promoted to ${t.toUpperCase()}! ðŸ‘‘`,g.value="alert-success",k.value="fas fa-crown",O.value=null,I.value=null,w.value=w.value==="white"?"black":"white",X(),ne.value&&w.value==="black"&&C.value&&setTimeout(()=>H(),700)};return Ye(()=>{document.title="IISER-TVM Chess Club - Bot",G(),d.value="White to move. Select a piece to start!",g.value="alert-info",k.value="fas fa-chess"}),(t,e)=>(m(),h("div",He,[i("section",Ge,[i("div",Je,[i("div",Xe,[i("div",Ze,[i("div",et,[i("div",tt,[(m(!0),h(je,null,Ve(u.value,(s,a)=>(m(),h("div",{key:a,class:R(Te(a)),onClick:o=>We(a)},[s.piece?(m(),h("div",{key:0,class:R([ze(s.piece),"chess-piece"]),"data-piece":s.piece},null,10,at)):y("",!0),te(a)?(m(),h("div",ot)):y("",!0)],10,st))),128))],512)]),i("div",nt,[$.value?(m(),h("div",lt,[i("div",{class:R([Ce.value,"alert"])},[e[5]||(e[5]=i("img",{src:Fe,alt:"status icon",class:"status-image me-2"},null,-1)),e[6]||(e[6]=i("i",{class:"me-2"},null,-1)),N(be($.value),1)],2)])):y("",!0),d.value?(m(),h("div",it,[i("div",{class:R([g.value,"alert"])},[i("i",{class:R([k.value,"me-2"])},null,2),N(be(d.value),1)],2)])):y("",!0),i("div",null,[i("button",{onClick:ke,class:"btn btn-control btn-reset"},[...e[7]||(e[7]=[i("i",{class:"fas fa-redo me-2"},null,-1),N("Reset ",-1)])])])])])])]),z.value?(m(),h("div",ut,[i("div",rt,[e[12]||(e[12]=i("h3",{class:"text-center"},"Choose Promotion Piece",-1)),i("div",ct,[i("button",{onClick:e[0]||(e[0]=s=>x("q")),class:"promotion-btn"},[i("div",{class:R([I.value?"white-piece":"black-piece","promotion-piece"])},"â™•",2),e[8]||(e[8]=i("span",null,"Queen",-1))]),i("button",{onClick:e[1]||(e[1]=s=>x("r")),class:"promotion-btn"},[i("div",{class:R([I.value?"white-piece":"black-piece","promotion-piece"])},"â™–",2),e[9]||(e[9]=i("span",null,"Rook",-1))]),i("button",{onClick:e[2]||(e[2]=s=>x("b")),class:"promotion-btn"},[i("div",{class:R([I.value?"white-piece":"black-piece","promotion-piece"])},"â™—",2),e[10]||(e[10]=i("span",null,"Bishop",-1))]),i("button",{onClick:e[3]||(e[3]=s=>x("n")),class:"promotion-btn"},[i("div",{class:R([I.value?"white-piece":"black-piece","promotion-piece"])},"â™˜",2),e[11]||(e[11]=i("span",null,"Knight",-1))])])])])):y("",!0),(M.value||q.value)&&!V.value?(m(),h("div",vt,[i("div",ft,[i("button",{class:"popup-close-btn",onClick:e[4]||(e[4]=s=>V.value=!0)},[...e[13]||(e[13]=[i("i",{class:"fas fa-times"},null,-1)])]),i("div",dt,[M.value?(m(),h("i",pt)):y("",!0),q.value?(m(),h("i",ht)):y("",!0)]),i("h2",mt,[M.value?(m(),h("span",gt,"Checkmate!")):y("",!0),q.value?(m(),h("span",kt,"Stalemate!")):y("",!0)]),i("p",wt,[M.value&&T.value==="white"?(m(),h("span",bt,"â™” White Wins!")):y("",!0),M.value&&T.value==="black"?(m(),h("span",yt,"â™š Black Wins!")):y("",!0),q.value?(m(),h("span",Ct,"It's a Draw!")):y("",!0)]),i("div",{class:"game-end-buttons"},[i("button",{onClick:ke,class:"btn btn-light btn-lg"},[...e[14]||(e[14]=[i("i",{class:"fas fa-redo me-2"},null,-1),N("Play Again ",-1)])])])])])):y("",!0)])]))}},It=xe(Mt,[["__scopeId","data-v-c7413fbf"]]);export{It as default};
